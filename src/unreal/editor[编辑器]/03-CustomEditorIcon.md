---
title: ED03.è‡ªå®šä¹‰å›¾æ ‡
order : 21
category:
  - u++
---

<chatmessage avatar="../../assets/emoji/hh.png" :avatarWidth="40">

Dady!ä¸Šä¸€èŠ‚ç•™çš„å‘ï¼Œæˆ‘ä»¬åšçš„`AssetDefinition` è¯¥æ€ä¹ˆè‡ªå®šä¹‰å›¾æ ‡å‘¢ï¼Ÿ

</chatmessage>

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >
å’±ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ç¼–è¾‘å™¨å†…æœ‰å‡ ç§å›¾æ ‡
</chatmessage>

---
##  **è½¯ä»¶ï¼ˆsoftwareï¼‰å¹³å°å›¾æ ‡**

<chatmessage avatar="../../assets/emoji/hh.png" :avatarWidth="40">
æ— éœ€å¤šè¨€ï¼ŒæŒ‡æ‰“åŒ…å¥½æ¡Œé¢æ˜¾ç¤ºçš„å›¾æ ‡ã€‚
</chatmessage>

![](..%2Fassets%2Fsmallpic4.jpg)

---
##  **æ’ä»¶ï¼ˆPluginï¼‰å›¾æ ‡**

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >
ä¸ä¼šå§ä¸ä¼šå§ï¼è¿˜æœ‰äººä¸çŸ¥é“æ€ä¹ˆæ¢æ’ä»¶å›¾æ ‡ï¼Ÿ
</chatmessage>

<chatmessage avatar="../../assets/emoji/hx.png" :avatarWidth="40">
æˆ‘ï¼æˆ‘ï¼é‚£æˆ‘é—®ä½ ï¼é‚£æˆ‘æˆ‘é—®ä½ ï¼
</chatmessage>

![](..%2Fassets%2Fpluginicon002.jpg)

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >

ç›´æ¥ç”¨ä¸€å¼ 128x128çš„pngæ›¿æ¢æ‰å…¶ä¸­çš„é»˜è®¤å›¾ç‰‡å³å¯

</chatmessage>

![](..%2Fassets%2FIcon128.jpg)

```cpp
XXX\Plugins\XXX\Resources\Icon128.png
```
---

### å›¾æ ‡ å’Œ ç¼©ç•¥å›¾

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >
åœ¨ä¸‹ä¸€æ­¥å‰ï¼Œå’±ä»¬å¿…é¡»ç®€è¦çš„åŒºåˆ†ä¸€ä¸‹å›¾æ ‡å’Œç¼©ç•¥å›¾
</chatmessage>

<chatmessage avatar="../../assets/emoji/hx.png" :avatarWidth="40">

å›¾æ ‡æ˜¯`IconBrush` è€Œ ç¼©ç•¥å›¾æ˜¯ `ThumbnailBrush`

</chatmessage>

>**ä¿®æ”¹ä¹‹å‰çš„**

![](..%2Fassets%2Ficons001.png)

>**è‡ªå®šä¹‰å**

![](..%2Fassets%2Fsmallpi3.png)


## **æ‰©å±•ç‚¹å›¾æ ‡**

- **åœºæ™¯ä¸­çš„ Actor å³é”®èœå•**
- **å†…å®¹æµè§ˆå™¨ï¼ˆContent Browserï¼‰ç©ºç™½å¤„å³é”®èœå•**
- **å†…å®¹æµè§ˆå™¨ï¼ˆContent Browserï¼‰ä¸­çš„èµ„äº§ï¼ˆAssetï¼‰å³é”®èœå•**
- **å·¥å…·æ æŒ‰é’®**

---

##  **èµ„äº§ç±»å‹ï¼ˆAsset Typeï¼‰å›¾æ ‡**

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >

åœ¨å†…å®¹æµè§ˆå™¨`ï¼ˆContent Browserï¼‰`å³é”®åˆ—è¡¨ä¸­ç”¨çš„éƒ½æ˜¯`IconBrush`

</chatmessage>

![](..%2Fassets%2Fcin001.jpg)

<chatmessage avatar="../../assets/emoji/hx.png" :avatarWidth="40">
ä¸Šä¸€ç« ä¸­ï¼Œè²Œä¼¼å’±ä»¬å¹¶æ²¡æœ‰æ”¹æˆåŠŸèµ„äº§ç±»çš„å›¾æ ‡å‘€ï¼ğŸ¶
</chatmessage>

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >

æ˜¯çš„ï¼Œå› ä¸ºå’±çš„`UDataDefinition : public UPrimaryDataAsset`æœ¬è´¨æ˜¯æ•°æ®èµ„äº§ï¼Œç³»ç»Ÿä¼šé»˜è®¤ç»™å®šä¸€å¥—å›¾æ ‡ã€‚

</chatmessage>

<chatmessage avatar="../../assets/emoji/blzt.png" :avatarWidth="40">
é‚£è¯¥æ€ä¹ˆè‡ªå®šä¹‰å•Šï¼
</chatmessage>

## **è‡ªå®šä¹‰ `FSlateStyleSet` æ¥æ³¨å†Œè‡ªå®šä¹‰å›¾æ ‡**

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >

æ ¸å¿ƒæ­¥éª¤æ˜¯é€šè¿‡ `Slateæ ·å¼è¡¨` å®ç°

</chatmessage>

### 1. **å¼•å…¥æ¨¡å—**

```csharp
// Build.cs
PrivateDependencyModuleNames.AddRange(new string[]
{
    "SlateCore",
    "Projects" 
});
```


### 2. **åˆ›å»º `FSlateStyleSet` å¹¶åŠ è½½è‡ªå®šä¹‰å›¾æ ‡**

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >
è¿™é‡Œæœ¬è´¨å…¶å®æ˜¯å•ä¾‹ï¼Œè‡³äºç”¨ä¸ç”¨å…±äº«æŒ‡é’ˆç»´æŠ¤å…¶å®ä¸æ˜¯å¾ˆé‡è¦ã€‚é¿å…å†…å­˜æ³„æ¼éœ€è¦å’Œæ¨¡å—ç”Ÿå‘½å‘¨æœŸä¸€è‡´ã€‚
</chatmessage>

<chatmessage avatar="../../assets/emoji/hx.png" :avatarWidth="40">

è®°å¾—åœ¨æ’ä»¶å¯¹åº”çš„`Resources`ä¸­æ”¾å…¥å›¾æ ‡ï¼Œå¹¶ä¸”é¢œè‰²æ¨èæ˜¯ç™½è‰²çš„ï¼Œåº•å›¾æ˜¯é€æ˜çš„ã€‚

</chatmessage>

![](..%2Fassets%2Fsmallpi2.jpg)

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >
å°ºå¯¸æ–¹é¢å»ºè®®ä¸è¦è¶…è¿‡128
</chatmessage>

```cpp
#pragma once

#include "CoreMinimal.h"
#include "Interfaces/IPluginManager.h"
#include "Styling/SlateStyle.h"
#include "Styling/SlateStyleRegistry.h"

#define IMAGE_BRUSH(RelativePath, ...) FSlateImageBrush(RootToContentDir(RelativePath, TEXT(".png") ), __VA_ARGS__)

class FDataSystemEditorStyle : public FSlateStyleSet
{
public:
	FDataSystemEditorStyle() : FSlateStyleSet("DataSystemEditorStyle")
	{
		const FVector2D Icon16x16(16.f, 16.f);
		const FVector2D Icon20x20(20.f, 20.f);
		const FVector2D Icon40x40(40.f, 40.f);
		const FVector2D Icon64x64(64.f, 64.f);
		const FVector2D Icon128x128(128.f, 128.f);

		SetContentRoot(IPluginManager::Get().FindPlugin("DataSystem")->GetBaseDir() / TEXT("Resources"));

		Set("ClassIcon.DataDefinition", new IMAGE_BRUSH("Icons/AssetIcons/DataSystem_x16", Icon16x16));
		Set("ClassThumbnail.DataDefinition", new IMAGE_BRUSH("Icons/AssetIcons/DataSystem_x64", Icon64x64));


		FSlateStyleRegistry::RegisterSlateStyle(*this);
	}

	static FDataSystemEditorStyle& Get()
	{
		static FDataSystemEditorStyle Inst;
		return Inst;
	}

	~FDataSystemEditorStyle()
	{
		FSlateStyleRegistry::UnRegisterSlateStyle(*this);
	}
};

#undef IMAGE_BRUSH

```

<chatmessage avatar="../../assets/emoji/blzt.png" :avatarWidth="40">
ä¸è¦è¿·èŒ«ï¼Œå°±æ˜¯åŠ ä¸€ä¸ªç±»çš„äº‹ï¼Œä¹‹ååœ¨æ¨¡å—ä¸­ç»´æŠ¤ä¸€ä¸‹ç”Ÿå‘½å‘¨æœŸå³å¯ã€‚
</chatmessage>

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >
Babaæ€•ä½ ä¸çŸ¥é“ï¼Œè¿™é‡Œé‡ç‚¹è¯´ä¸€ä¸‹æˆ‘ä»¬çš„å…³æ³¨ç‚¹
</chatmessage>


```cpp
Set("ClassIcon.XXXç±»", new IMAGE_BRUSH("Icons/AssetIcons/DataSystem_x16", Icon16x16));
```

> å…¶ä¸­XXXç±»å°±æ˜¯ä½ è‡ªå·±å†™çš„ç±»å»æ‰U

![](..%2Fassets%2Fsmallpi5.png)


>æ¨¡å—

```cpp
//åˆ©ç”¨å…±äº«æŒ‡é’ˆç®¡ç†
private:
    TSharedPtr<FDataSystemEditorStyle> StyleInstance;
    
#include "DataSystemEditor.h"

#include "DataSystemEditorStyle.h"

#define LOCTEXT_NAMESPACE "FDataSystemEditorModule"

void FDataSystemEditorModule::StartupModule()
{
	// å…±äº«æŒ‡é’ˆæ–¹å¼ç®¡ç† Style å®ä¾‹
	StyleInstance = MakeShared<FDataSystemEditorStyle>();
}

void FDataSystemEditorModule::ShutdownModule()
{
	// é‡Šæ”¾ Style å®ä¾‹
	StyleInstance.Reset();
}
#undef LOCTEXT_NAMESPACE
    
IMPLEMENT_MODULE(FDataSystemEditorModule, DataSystemEditor)
```

<chatmessage avatar="../../assets/emoji/hx.png" :avatarWidth="40">

æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘åŠ äº†è¿™ä¸ªæ¨¡å—åé‡å†™UAssetDefinitionDefaultä¸­çš„`GetThumbnailBrush` è¿˜æ˜¯ä¼šç”Ÿæ•ˆï¼

</chatmessage>

![](..%2Fassets%2Fsmallpic3.jpg)

```cpp
//UAssetDefinition_DataDefinition : public UAssetDefinitionDefault
virtual const FSlateBrush* GetThumbnailBrush(const FAssetData& InAssetData, const FName InClassName) const override final
{
    return FAppStyle::Get().GetBrush("ContentBrowser.AssetTreeFolderOpen");  
}
```

---

##  **å·¥å…·æ å›¾æ ‡ï¼ˆToolbar Iconsï¼‰**

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >
é›†æˆå¸¸ç”¨å·¥å…·æŒ‰é’®ï¼Œä¾‹å¦‚ï¼š
</chatmessage>

![](..%2Fassets%2FToolbaricon.png)

---

<chatmessage avatar="../../assets/emoji/hx.png" :avatarWidth="40">

å¯æ˜¯ï¼æˆ‘è¯¥æ€ä¹ˆåœ¨è¿™ä¸ª`ToolBar`ä¸Šæˆ–è€…å³é”®èœå•ä¸Šæ³¨å†Œæˆ‘è‡ªå·±çš„æŒ‰é’®å‘¢ï¼Ÿ

</chatmessage>

<chatmessage avatar="../../assets/emoji/bqb (2).png" :avatarWidth="40" alignLeft >
æ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”å¬ä¸‹å›åˆ†è§£ã€‚
</chatmessage>