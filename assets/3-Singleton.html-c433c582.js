import{_ as d,r as i,o as k,c as v,d as e,w as a,a as n,b as s,e as p}from"./app-719fbc9a.js";const m="/RenderDoc/assets/sington-29a46655.jpg",b="/RenderDoc/assets/singletonc__-8c5e961e.png",g="/RenderDoc/assets/setsingclass-4d74f761.png",h="/RenderDoc/assets/nullptr-19c50daa.jpg",f="/RenderDoc/assets/setsing-ef2ffd52.png",y="/RenderDoc/assets/gameinstanceprint-05c6053e.png",_={},w=p(`<div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>  
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    MyClass<span class="token operator">*</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),S=p(`<ol><li><p><strong>默认构造函数 (Default Constructor):</strong> 如果你没有为类定义任何构造函数，编译器将生成一个无参的默认构造函数。它用于创建对象时的初始化，例如 <code>MyClass obj;</code>。</p></li><li><p><strong>析构函数 (Destructor):</strong> 如果你没有显式定义析构函数，编译器将生成一个默认的析构函数。它用于在对象生命周期结束时进行清理工作，例如释放动态分配的资源。析构函数的名称是类名前加上波浪号 <code>~</code>，如 <code>~MyClass()</code>。</p></li><li><p><strong>拷贝构造函数 (Copy Constructor):</strong> 如果你没有定义自己的拷贝构造函数，编译器将生成一个默认的拷贝构造函数。它用于通过复制另一个对象来初始化一个新对象，例如 <code>MyClass obj1; MyClass obj2 = obj1;</code>。</p></li><li><p><strong>拷贝赋值运算符 (Copy Assignment Operator):</strong> 如果你没有定义自己的拷贝赋值运算符，编译器将生成一个默认的拷贝赋值运算符。它用于将一个对象的值复制给另一个对象，例如 <code>MyClass obj1, obj2; obj2 = obj1;</code>。</p></li></ol><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),j=p(`<blockquote><p>类默认是私有的。</p></blockquote><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">MyClass</span>
<span class="token punctuation">{</span>
    <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    MyClass<span class="token operator">*</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),C=n("figure",null,[n("img",{src:m,alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),G=p(`<div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">// 将构造函数私有化</span>
    <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span><span class="token operator">:</span>
<span class="token comment">// 静态成员函数，用于获取类的唯一实例</span>
<span class="token keyword">static</span> Singleton<span class="token operator">&amp;</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">static</span> Singleton instance<span class="token punctuation">;</span>
<span class="token keyword">return</span> instance <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">testfunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
std<span class="token double-colon punctuation">::</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">&quot;testfunction&quot;</span><span class="token operator">&lt;&lt;</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// 获取单例实例</span>
    Singleton<span class="token operator">&amp;</span> singletonInstance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    singletonInstance<span class="token punctuation">.</span><span class="token function">testfunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),U=p(`<div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">// 将构造函数私有化</span>
    <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">static</span> Singleton<span class="token operator">*</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">static</span> Singleton instance<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">&amp;</span>instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">testfunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        std<span class="token double-colon punctuation">::</span>cout<span class="token operator">&lt;&lt;</span><span class="token string">&quot;testfunction&quot;</span><span class="token operator">&lt;&lt;</span>std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
    <span class="token comment">// 获取单例实例</span>
    Singleton<span class="token operator">*</span> singletonInstance <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    singletonInstance<span class="token operator">-&gt;</span><span class="token function">testfunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),W=n("figure",null,[n("img",{src:b,alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),M=n("h3",{id:"enginesingleton",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#enginesingleton","aria-hidden":"true"},"#"),s(" EngineSingleton")],-1),x=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"pragma"),s(),n("span",{class:"token expression"},"once")]),s(`

`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"CoreMinimal.h"')]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"UObject/NoExportTypes.h"')]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"UObject/ObjectMacros.h"')]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"GameSingleton.generated.h"')]),s(`

`),n("span",{class:"token function"},"UCLASS"),n("span",{class:"token punctuation"},"("),s("Blueprintable"),n("span",{class:"token punctuation"},","),s("BlueprintType"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"GAMECPP_API"),s(" UGameSingleton "),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"public"),s(` UObject
`),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token function"},"GENERATED_BODY"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token function"},"UFUNCTION"),n("span",{class:"token punctuation"},"("),s("BlueprintCallable"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"static"),s(" UGameSingleton"),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token function"},"GetInstance"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),I=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"GameSingleton.h"')]),s(`

UGameSingleton`),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token class-name"},"UGameSingleton"),n("span",{class:"token double-colon punctuation"},"::"),n("span",{class:"token function"},"GetInstance"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("GEngine"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},"{"),s(`
        UGameSingleton`),n("span",{class:"token operator"},"*"),s(" Instance "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"Cast"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),s("UGameSingleton"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),s("GEngine"),n("span",{class:"token operator"},"->"),s("GameSingleton"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" Instance"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"nullptr"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=n("figure",null,[n("img",{src:g,alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),L=p(`<div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>UGameSingleton<span class="token operator">*</span> Instance <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>UGameSingleton<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>GEngine<span class="token operator">-&gt;</span>GameSingleton<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//没有设置强转失败</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',2),A=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"pragma"),s(),n("span",{class:"token expression"},"once")]),s(`

`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"CoreMinimal.h"')]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"UObject/NoExportTypes.h"')]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"UObject/ObjectMacros.h"')]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"GameSingleton.generated.h"')]),s(`

`),n("span",{class:"token function"},"UCLASS"),n("span",{class:"token punctuation"},"("),s("Blueprintable"),n("span",{class:"token punctuation"},","),s("BlueprintType"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"EXORCIST_API"),s(" UGameSingleton "),n("span",{class:"token operator"},":"),s(),n("span",{class:"token keyword"},"public"),s(` UObject
`),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token function"},"GENERATED_BODY"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
	
	`),n("span",{class:"token function"},"UFUNCTION"),n("span",{class:"token punctuation"},"("),s("BlueprintCallable"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token keyword"},"static"),s(" UGameSingleton"),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token function"},"GetInstance"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
	
`),n("span",{class:"token keyword"},"public"),n("span",{class:"token operator"},":"),s(`
	`),n("span",{class:"token function"},"UPROPERTY"),n("span",{class:"token punctuation"},"("),s("BlueprintReadWrite"),n("span",{class:"token punctuation"},")"),s(`
	int32 InstanceCount `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"30"),n("span",{class:"token punctuation"},";"),n("span",{class:"token comment"},"//初值30"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),O=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},'"GameSingleton.h"')]),s(`

UGameSingleton`),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token class-name"},"UGameSingleton"),n("span",{class:"token double-colon punctuation"},"::"),n("span",{class:"token function"},"GetInstance"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token punctuation"},"{"),s(`
	`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("GEngine"),n("span",{class:"token punctuation"},")"),s(`
	`),n("span",{class:"token punctuation"},"{"),s(`
		UGameSingleton`),n("span",{class:"token operator"},"*"),s(" Instance "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token generic-function"},[n("span",{class:"token function"},"Cast"),n("span",{class:"token generic class-name"},[n("span",{class:"token operator"},"<"),s("UGameSingleton"),n("span",{class:"token operator"},">")])]),n("span",{class:"token punctuation"},"("),s("GEngine"),n("span",{class:"token operator"},"->"),s("GameSingleton"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		GEngine`),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"AddOnScreenDebugMessage"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1.0f"),n("span",{class:"token punctuation"},","),s(" FColor"),n("span",{class:"token double-colon punctuation"},"::"),s("White"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token class-name"},"FString"),n("span",{class:"token double-colon punctuation"},"::"),n("span",{class:"token function"},"SanitizeFloat"),n("span",{class:"token punctuation"},"("),s("Instance"),n("span",{class:"token operator"},"->"),s("InstanceCount"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"FVector2D"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
		`),n("span",{class:"token keyword"},"return"),s(" Instance"),n("span",{class:"token punctuation"},";"),s(`
	`),n("span",{class:"token punctuation"},"}"),s(`
	`),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"nullptr"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),B=n("figure",null,[n("img",{src:f,alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),N=n("h3",{id:"gameinstance",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#gameinstance","aria-hidden":"true"},"#"),s(" GameInstance")],-1),D=p('<figure><img src="'+y+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="其他写法" tabindex="-1"><a class="header-anchor" href="#其他写法" aria-hidden="true">#</a> 其他写法</h3><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">HELLO_API</span> UMyScoreManager <span class="token operator">:</span> <span class="token keyword">public</span> UObject
<span class="token punctuation">{</span>
    <span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span><span class="token operator">:</span>
<span class="token comment">// 一些公用的函数或者Property</span>
    <span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">)</span>
        <span class="token keyword">float</span> Score<span class="token punctuation">;</span>

    <span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span>DisplayName<span class="token operator">=</span><span class="token string">&quot;MyScoreManager&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">static</span> UMyScoreManager<span class="token operator">*</span> <span class="token function">Instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">static</span> UMyScoreManager<span class="token operator">*</span> instance<span class="token operator">=</span><span class="token keyword">nullptr</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token operator">==</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            instance<span class="token operator">=</span><span class="token generic-function"><span class="token function">NewObject</span><span class="token generic class-name"><span class="token operator">&lt;</span>UMyScoreManager<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            instance<span class="token operator">-&gt;</span><span class="token function">AddToRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token comment">//return GetMutableDefault&lt;UMyScoreManager&gt;();</span>
    <span class="token punctuation">}</span>
    <span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintCallable<span class="token punctuation">)</span>
        <span class="token keyword">void</span> <span class="token function">AddScore</span><span class="token punctuation">(</span><span class="token keyword">float</span> delta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),R={href:"https://forums.unrealengine.com/t/singleton-pattern-in-c/430452",target:"_blank",rel:"noopener noreferrer"},T={href:"https://www.bilibili.com/video/BV1bR4y177Hp/?spm_id_from=333.999.0.0",target:"_blank",rel:"noopener noreferrer"};function z(q,P){const t=i("ChatMessage"),u=i("CodeTabs"),l=i("GifWithButton"),r=i("ExternalLinkIcon");return k(),v("div",null,[e(t,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[s(" 什么是单例? ")]),_:1}),e(t,{avatar:"../../assets/emoji/bqb (1).png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 确保一个类只有一个实例，并为其提供一个全局访问入口。 ")]),_:1}),e(t,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:a(()=>[s(" 创建一个类后，怎么保证他有且只能有一个？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 你先回答我，定义一个类后你是通过什么办法来新建实例的？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:a(()=>[s(" new一个对象呗。 ")]),_:1}),w,e(t,{avatar:"../../assets/emoji/bqb (5).png",avatarWidth:40},{default:a(()=>[s(" 搜嘎！可是，该怎么限制用户的new操作呢？我总不能和用户说你不能new一个新实例吧！ ")]),_:1}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 你可以先康康一个普通类初始化后默认会有哪些操作？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/ybk.png",avatarWidth:40},{default:a(()=>[s(" 这还不简单，一个类默认拥有bigfour,即四个初始化操作。 ")]),_:1}),S,e(t,{avatar:"../../assets/emoji/new2.png",avatarWidth:50,alignLeft:""},{default:a(()=>[s(" 如果我们把构造函数私有化你觉得会发生什么？ ")]),_:1}),j,e(t,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:a(()=>[s(" 还能发生什么，编译器报错呗。 ")]),_:1}),C,e(t,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:a(()=>[s(" 构造函数私有化了，限制了用户new的行为，但同时我们也无法创建第一个对象了。 ")]),_:1}),e(t,{avatar:"../../assets/emoji/bqb (2).png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 没错，我们已经成功限制了用户的new行为，问题也变成了怎么生成第一个实例！ 现在你思考一下什么情况下不需要新建实例就能访问某个对象成员？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/new3.png",avatarWidth:55},{default:a(()=>[s(" static关键字修饰的成员函数！可是这跟怎么生成第一个实例有什么关系？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/new2.png",avatarWidth:55,alignLeft:""},{default:a(()=>[s(" 你傻呀！现在new这条路已经不能走了，咱必须想办法开导它自己创建自己啊！ ")]),_:1}),G,e(t,{avatar:"../../assets/emoji/new3.png",avatarWidth:55},{default:a(()=>[s(" 妙啊！也就是说利用static函数和他沟通，让他自己创造自己！ ")]),_:1}),e(t,{avatar:"../../assets/emoji/bqb (2).png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 孺子可教！改成指针传递也是可以的 ")]),_:1}),U,e(t,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[s(" 那么！UE中支持原生C++单例实现吗？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 支持！但官方不推荐使用！官方推荐我们使用subsystem ")]),_:1}),W,e(t,{avatar:"../../assets/emoji/new7.png",avatarWidth:40},{default:a(()=>[s(" 可我今天就想用！你该不会是不会吧！ ")]),_:1}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" Baba今天就让你开开眼！ ")]),_:1}),e(t,{avatar:"../../assets/emoji/new3.png",avatarWidth:55},{default:a(()=>[s(" 那么怎么开始呢？ ")]),_:1}),M,e(u,{id:"62",data:[{id:"GameSingleton.h"},{id:"GameSingleton.cpp"}],"tab-id":"language"},{title0:a(({value:o,isActive:c})=>[s("GameSingleton.h")]),title1:a(({value:o,isActive:c})=>[s("GameSingleton.cpp")]),tab0:a(({value:o,isActive:c})=>[x]),tab1:a(({value:o,isActive:c})=>[I]),_:1},8,["data"]),e(t,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[s(" 可是你这也没有私有化构造啊！ ")]),_:1}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 没错，严格意义上这个类并不是单例，他只是强制将引擎GameSingleton转换成当前类。因此还需要在引擎设置中设置一下。 ")]),_:1}),E,e(t,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[s(" 如果不设置呢？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 不好意思没有设置引擎会崩溃，大概是强制转换出现了问题。 ")]),_:1}),L,e(t,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[s(" 设置好然后呢？怎么验证他是单例呢？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 这个好办，加入一些测试变量 ")]),_:1}),e(u,{id:"83",data:[{id:"GameSingleton.h"},{id:"GameSingleton.cpp"}],"tab-id":"language"},{title0:a(({value:o,isActive:c})=>[s("GameSingleton.h")]),title1:a(({value:o,isActive:c})=>[s("GameSingleton.cpp")]),tab0:a(({value:o,isActive:c})=>[A]),tab1:a(({value:o,isActive:c})=>[O]),_:1},8,["data"]),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 蓝图中通过实例指针修改成员变量，然后跳转关卡或者重新打开打印一下康康不就知道了！` ")]),_:1}),B,e(l,{src:"../../assets/unrealgif/ramdonsington.gif"}),e(t,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[s(" 我发现他重写打开关卡后他设置的值依然是上一次！只有在引擎彻底重启后数值才恢复成30。 ")]),_:1}),e(l,{src:"../../assets/unrealgif/sington.gif"}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 没错，他的生命周期和引擎是一样的，意味着在编辑器模式中的GEngine没有销毁这个变量就一直存在。 ")]),_:1}),N,e(t,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[s(" 好像和游戏实例差不多耶！ ")]),_:1}),e(t,{avatar:"../../assets/emoji/blzt.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 确实，他的表现确实很像我们的游戏实例，全局只有一个实例。但游戏实例的生命周期却没有EngineSingleton长。 关卡结束运行就会释放内存空间。 ")]),_:1}),e(l,{src:"../../assets/unrealgif/gameinstancegif.gif"}),e(t,{avatar:"../../assets/emoji/dsyj.png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 使用了open+level重新打开了这个关卡。 ")]),_:1}),D,e(t,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[s(" 蓝图函数库是单例吗？ ")]),_:1}),e(t,{avatar:"../../assets/emoji/bqb (3).png",avatarWidth:40,alignLeft:""},{default:a(()=>[s(" 蓝图函数库（Blueprint Function Library）并不是严格意义上的单例。蓝图函数库是一种特殊类型的类，通常用于存储一组静态函数，这些函数可供蓝图（Blueprint）图表中的蓝图调用。 ")]),_:1}),n("p",null,[n("a",R,[s("UE官方论坛"),e(r)])]),n("p",null,[n("a",T,[s("Cherno C++"),e(r)])])])}const V=d(_,[["render",z],["__file","3-Singleton.html.vue"]]);export{V as default};
