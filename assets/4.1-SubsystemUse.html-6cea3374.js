import{_ as u}from"./subsst-3dd7cd85.js";import{_ as r,r as o,o as d,c as k,d as c,w as a,a as s,b as n,e as l}from"./app-8a846373.js";const m="/RenderDoc/assets/sub-2b852ab9.png",b={},v=s("h2",{id:"subsystem-实践",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#subsystem-实践","aria-hidden":"true"},"#"),n(" Subsystem|实践")],-1),y=l(`<h3 id="_1-继承对应的子系统" tabindex="-1"><a class="header-anchor" href="#_1-继承对应的子系统" aria-hidden="true">#</a> 1. 继承对应的子系统</h3><div class="language-markdown line-numbers-mode" data-ext="md"><pre class="language-markdown"><code><span class="token list punctuation">-</span> 引擎		-&gt; 继承 UEngineSubsystem
<span class="token list punctuation">-</span> 编辑器		-&gt; 继承 UEditorSubsystem
<span class="token list punctuation">-</span> 游戏实例	-&gt; 继承 UGameInstanceSubsystem
<span class="token list punctuation">-</span> 世界		-&gt; 继承 UWorldSubsystem
<span class="token list punctuation">-</span> 本地玩家	-&gt; 继承 ULocalPlayerSubsystem
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_2-添加函数" tabindex="-1"><a class="header-anchor" href="#_2-添加函数" aria-hidden="true">#</a> 2.添加函数</h3>',4),g=s("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[s("pre",{class:"language-cpp"},[s("code",null,[s("span",{class:"token macro property"},[s("span",{class:"token directive-hash"},"#"),s("span",{class:"token directive keyword"},"pragma"),n(),s("span",{class:"token expression"},"once")]),n(`

`),s("span",{class:"token macro property"},[s("span",{class:"token directive-hash"},"#"),s("span",{class:"token directive keyword"},"include"),n(),s("span",{class:"token string"},'"CoreMinimal.h"')]),n(`
`),s("span",{class:"token macro property"},[s("span",{class:"token directive-hash"},"#"),s("span",{class:"token directive keyword"},"include"),n(),s("span",{class:"token string"},'"Subsystems/GameInstanceSubsystem.h"')]),n(`
`),s("span",{class:"token macro property"},[s("span",{class:"token directive-hash"},"#"),s("span",{class:"token directive keyword"},"include"),n(),s("span",{class:"token string"},'"MyGameInstanceSubsystem.generated.h"')]),n(`

`),s("span",{class:"token function"},"UCLASS"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),n(`
`),s("span",{class:"token keyword"},"class"),n(),s("span",{class:"token class-name"},"EXORCIST_API"),n(" UMyGameInstanceSubsystem "),s("span",{class:"token operator"},":"),n(),s("span",{class:"token keyword"},"public"),n(` UGameInstanceSubsystem
`),s("span",{class:"token punctuation"},"{"),n(`
	`),s("span",{class:"token function"},"GENERATED_BODY"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),n(`
`),s("span",{class:"token keyword"},"public"),s("span",{class:"token operator"},":"),n(`
	`),s("span",{class:"token comment"},"//是否创建这个子系统"),n(`
	`),s("span",{class:"token keyword"},"virtual"),n(),s("span",{class:"token keyword"},"bool"),n(),s("span",{class:"token function"},"ShouldCreateSubsystem"),s("span",{class:"token punctuation"},"("),n("UObject"),s("span",{class:"token operator"},"*"),n(" Outer"),s("span",{class:"token punctuation"},")"),n("  "),s("span",{class:"token keyword"},"const"),n(),s("span",{class:"token keyword"},"override"),s("span",{class:"token punctuation"},";"),n(`
	`),s("span",{class:"token comment"},"//初始化"),n(`
	`),s("span",{class:"token keyword"},"virtual"),n(),s("span",{class:"token keyword"},"void"),n(),s("span",{class:"token function"},"Initialize"),s("span",{class:"token punctuation"},"("),n("FSubsystemCollectionBase"),s("span",{class:"token operator"},"&"),n(" Collection"),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token keyword"},"override"),s("span",{class:"token punctuation"},";"),n(`
	`),s("span",{class:"token comment"},"//销毁"),n(`
	`),s("span",{class:"token keyword"},"virtual"),n(),s("span",{class:"token keyword"},"void"),n(),s("span",{class:"token function"},"Deinitialize"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token keyword"},"override"),s("span",{class:"token punctuation"},";"),n(`
`),s("span",{class:"token keyword"},"public"),s("span",{class:"token operator"},":"),n(`
	`),s("span",{class:"token function"},"UPROPERTY"),s("span",{class:"token punctuation"},"("),n("BlueprintReadWrite"),s("span",{class:"token punctuation"},")"),n(`
	int32 HP`),s("span",{class:"token punctuation"},";"),n(`
`),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},";"),n(`

`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),h=s("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp"},[s("pre",{class:"language-cpp"},[s("code",null,[n(`
`),s("span",{class:"token macro property"},[s("span",{class:"token directive-hash"},"#"),s("span",{class:"token directive keyword"},"include"),n(),s("span",{class:"token string"},'"UMyGameInstanceSubsystem.h"')]),n(`

`),s("span",{class:"token keyword"},"bool"),n(),s("span",{class:"token class-name"},"UMyGameInstanceSubsystem"),s("span",{class:"token double-colon punctuation"},"::"),s("span",{class:"token function"},"ShouldCreateSubsystem"),s("span",{class:"token punctuation"},"("),n("UObject"),s("span",{class:"token operator"},"*"),n(" Outer"),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token keyword"},"const"),n(`
`),s("span",{class:"token punctuation"},"{"),n(`
	`),s("span",{class:"token keyword"},"return"),n(),s("span",{class:"token class-name"},"Super"),s("span",{class:"token double-colon punctuation"},"::"),s("span",{class:"token function"},"ShouldCreateSubsystem"),s("span",{class:"token punctuation"},"("),n("Outer"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
`),s("span",{class:"token punctuation"},"}"),n(`

`),s("span",{class:"token keyword"},"void"),n(),s("span",{class:"token class-name"},"UMyGameInstanceSubsystem"),s("span",{class:"token double-colon punctuation"},"::"),s("span",{class:"token function"},"Initialize"),s("span",{class:"token punctuation"},"("),n("FSubsystemCollectionBase"),s("span",{class:"token operator"},"&"),n(" Collection"),s("span",{class:"token punctuation"},")"),n(`
`),s("span",{class:"token punctuation"},"{"),n(`
	`),s("span",{class:"token class-name"},"Super"),s("span",{class:"token double-colon punctuation"},"::"),s("span",{class:"token function"},"Initialize"),s("span",{class:"token punctuation"},"("),n("Collection"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
`),s("span",{class:"token punctuation"},"}"),n(`

`),s("span",{class:"token keyword"},"void"),n(),s("span",{class:"token class-name"},"UMyGameInstanceSubsystem"),s("span",{class:"token double-colon punctuation"},"::"),s("span",{class:"token function"},"Deinitialize"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),n(`
`),s("span",{class:"token punctuation"},"{"),n(`
	`),s("span",{class:"token class-name"},"Super"),s("span",{class:"token double-colon punctuation"},"::"),s("span",{class:"token function"},"Deinitialize"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
`),s("span",{class:"token punctuation"},"}"),n(`

`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),S=l(`<h3 id="_3-其他类中使用" tabindex="-1"><a class="header-anchor" href="#_3-其他类中使用" aria-hidden="true">#</a> 3. 其他类中使用</h3><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token comment">//UMyEngineSubsystem获取</span>
UMyEngineSubsystem<span class="token operator">*</span> MySubsystem <span class="token operator">=</span> GEngine<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">GetEngineSubsystem</span><span class="token generic class-name"><span class="token operator">&lt;</span>UMyEngineSubsystem<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//UMyEditorSubsystem的获取</span>
UMyEditorSubsystem<span class="token operator">*</span> MySubsystem <span class="token operator">=</span> GEditor<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">GetEditorSubsystem</span><span class="token generic class-name"><span class="token operator">&lt;</span>UMyEditorSubsystem<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//UMyGameInstanceSubsystem的获取</span>
UGameInstance<span class="token operator">*</span> GameInstance <span class="token operator">=</span> <span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">GetGameInstance</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
UMyGameInstanceSubsystem<span class="token operator">*</span> MySubsystem <span class="token operator">=</span> GameInstance<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">GetSubsystem</span><span class="token generic class-name"><span class="token operator">&lt;</span>UMyGameInstanceSubsystem<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//UMyWorldSubsystem的获取</span>
UWorld<span class="token operator">*</span> World<span class="token operator">=</span>MyActor<span class="token operator">-&gt;</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//world用各种方式也都可以</span>
UMyWorldSubsystem<span class="token operator">*</span> MySubsystem<span class="token operator">=</span>World<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">GetSubsystem</span><span class="token generic class-name"><span class="token operator">&lt;</span>UMyWorldSubsystem<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//UMyLocalPlayerSubsystem的获取</span>
ULocalPlayer<span class="token operator">*</span> LocalPlayer <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>ULocalPlayer<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>PlayerController<span class="token operator">-&gt;</span>Player<span class="token punctuation">)</span>
UMyLocalPlayerSubsystem <span class="token operator">*</span> MySubsystem <span class="token operator">=</span> LocalPlayer<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">GetSubsystem</span><span class="token generic class-name"><span class="token operator">&lt;</span>UMyLocalPlayerSubsystem<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-蓝图中使用" tabindex="-1"><a class="header-anchor" href="#_4-蓝图中使用" aria-hidden="true">#</a> 4.蓝图中使用</h3><figure><img src="`+m+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',4);function f(_,U){const p=o("chatmessage"),i=o("CodeTabs");return d(),k("div",null,[v,c(p,{avatar:"../../assets/emoji/hh.png",avatarWidth:40},{default:a(()=>[n(" Subsystem|实践 ")]),_:1}),y,c(i,{id:"14",data:[{id:"ExorcistGameInstanceSubsystem.h"},{id:"ExorcistGameInstanceSubsystem.cpp"}],"tab-id":"language"},{title0:a(({value:e,isActive:t})=>[n("ExorcistGameInstanceSubsystem.h")]),title1:a(({value:e,isActive:t})=>[n("ExorcistGameInstanceSubsystem.cpp")]),tab0:a(({value:e,isActive:t})=>[g]),tab1:a(({value:e,isActive:t})=>[h]),_:1},8,["data"]),S])}const M=r(b,[["render",f],["__file","4.1-SubsystemUse.html.vue"]]);export{M as default};
