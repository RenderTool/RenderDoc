"use strict";(self.webpackChunkrenderdoc=self.webpackChunkrenderdoc||[]).push([[6914],{92700:(n,a,s)=>{s.r(a),s.d(a,{comp:()=>k,data:()=>d});var t=s(20641);const p=(0,t.Lk)("h3",{id:"导读",tabindex:"-1"},[(0,t.Lk)("a",{class:"header-anchor",href:"#导读"},[(0,t.Lk)("span",null,"导读")])],-1),e=(0,t.Lk)("p",null,[(0,t.eW)("食用本文建议先了解什么是增强输入系统！"),(0,t.Lk)("a",{href:"4.2-EnhancedInput"},"直通车")],-1),o=(0,t.Lk)("h2",{id:"enhancedinput-action绑定",tabindex:"-1"},[(0,t.Lk)("a",{class:"header-anchor",href:"#enhancedinput-action绑定"},[(0,t.Lk)("span",null,"EnhancedInput|Action绑定")])],-1),c=(0,t.Fv)('<div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code>\t<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">const</span> APlayerController<span class="token operator">*</span> PC <span class="token operator">=</span> <span class="token function">GetOwningPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">{</span>\n\t\tLocalPlayer <span class="token operator">=</span> PC<span class="token operator">-&gt;</span><span class="token function">GetLocalPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>LocalPlayer<span class="token punctuation">)</span>\n\t\t<span class="token punctuation">{</span>\n\t\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>UEnhancedInputLocalPlayerSubsystem<span class="token operator">*</span> Subsystem <span class="token operator">=</span> LocalPlayer<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">GetSubsystem</span><span class="token generic class-name"><span class="token operator">&lt;</span>UEnhancedInputLocalPlayerSubsystem<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t<span class="token comment">// 检查是否已经添加了输入映射上下文</span>\n\t\t\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Subsystem<span class="token operator">-&gt;</span><span class="token function">HasMappingContext</span><span class="token punctuation">(</span>InputMappingContext<span class="token punctuation">)</span><span class="token punctuation">)</span>\n\t\t\t\t<span class="token punctuation">{</span>\n\t\t\t\t\tSubsystem<span class="token operator">-&gt;</span><span class="token function">AddMappingContext</span><span class="token punctuation">(</span>InputMappingContext<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\t\n\t\t\t\t<span class="token punctuation">}</span>\n\t\t\t<span class="token punctuation">}</span>\n\t\t<span class="token punctuation">}</span>\n\t<span class="token punctuation">}</span>\n\n\t<span class="token comment">// 绑定聊天切换动作</span>\n\t<span class="token keyword">if</span> <span class="token punctuation">(</span>UEnhancedInputComponent<span class="token operator">*</span> EnhancedInputComponent <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>UEnhancedInputComponent<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">GetOwningPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>InputComponent<span class="token punctuation">)</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">{</span>\n\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>InputAction_ChatToggle<span class="token punctuation">)</span>\n\t\t<span class="token punctuation">{</span>\n\t\t\tEnhancedInputComponent<span class="token operator">-&gt;</span><span class="token function">BindAction</span><span class="token punctuation">(</span>InputAction_ChatToggle<span class="token punctuation">,</span> ETriggerEvent<span class="token double-colon punctuation">::</span>Triggered<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>UChatWidgetBase<span class="token double-colon punctuation">::</span>HandleChatAction<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t<span class="token punctuation">}</span>\n\t<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="enhancedinput-action解绑" tabindex="-1"><a class="header-anchor" href="#enhancedinput-action解绑"><span>EnhancedInput|Action解绑</span></a></h2>',2),i=(0,t.Fv)('<div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>UEnhancedInputComponent<span class="token operator">*</span> EnhancedInputComponent <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>UEnhancedInputComponent<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token function">GetOwningPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>InputComponent<span class="token punctuation">)</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">{</span>\n\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>InputAction_ChatTab<span class="token punctuation">)</span>\n\t\t<span class="token punctuation">{</span>\n\t\t\tint32 PreviousAction <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>\n\t\t\t<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> EnhancedInputComponent<span class="token operator">-&gt;</span><span class="token function">GetNumActionBindings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\n\t\t\t\t<span class="token keyword">if</span> <span class="token punctuation">(</span>EnhancedInputComponent<span class="token operator">-&gt;</span><span class="token function">GetActionBinding</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>ActionDelegate<span class="token punctuation">.</span><span class="token function">IsBoundToObject</span><span class="token punctuation">(</span>InputAction_ChatTab<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\n\t\t\t\t\tPreviousAction <span class="token operator">=</span> EnhancedInputComponent<span class="token operator">-&gt;</span><span class="token function">GetActionBinding</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t\t\t\t<span class="token keyword">break</span><span class="token punctuation">;</span>\n\t\t\t\t<span class="token punctuation">}</span>\n\n\t\t\t<span class="token punctuation">}</span>\n\t\t\tEnhancedInputComponent<span class="token operator">-&gt;</span><span class="token function">RemoveActionBindingForHandle</span><span class="token punctuation">(</span>PreviousAction<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\t<span class="token punctuation">}</span>\n\t<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),l=(0,t.Lk)("h2",{id:"enhancedinput-切换imc优先级",tabindex:"-1"},[(0,t.Lk)("a",{class:"header-anchor",href:"#enhancedinput-切换imc优先级"},[(0,t.Lk)("span",null,"EnhancedInput|切换IMC优先级")])],-1),u=(0,t.Fv)('<div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code>Subsystem<span class="token operator">-&gt;</span><span class="token function">AddMappingContext</span><span class="token punctuation">(</span>InputMappingContext<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\t\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>',1),r={},k=(0,s(66262).A)(r,[["render",function(n,a){const s=(0,t.g2)("chatmessage");return(0,t.uX)(),(0,t.CE)("div",null,[p,(0,t.bF)(s,{avatar:"../../assets/emoji/bqb (2).png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[e])),_:1}),o,(0,t.bF)(s,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:(0,t.k6)((()=>[(0,t.eW)(" 前文已经对增强输入系统有了个初步的理解。也知道上下文以及Action如何相辅相成。 ")])),_:1}),c,(0,t.bF)(s,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:(0,t.k6)((()=>[(0,t.eW)(" 现在我们知道怎么绑定Action，怎么解绑Action？ ")])),_:1}),(0,t.bF)(s,{avatar:"../../assets/emoji/dsyj.png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[(0,t.eW)(" 问得好！目前来看根据句柄解绑的方法比较靠谱。但需要手动获取句柄ID ")])),_:1}),i,(0,t.bF)(s,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:(0,t.k6)((()=>[(0,t.eW)(" 可是我实际运行后发现解绑后依然起作用啊！ ")])),_:1}),l,(0,t.bF)(s,{avatar:"../../assets/emoji/dsyj.png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[(0,t.eW)(" 你这种情况极大概率是因为IMC的优先级导致的，你是不是之前的IMC配置过相同的按键？ ")])),_:1}),(0,t.bF)(s,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:(0,t.k6)((()=>[(0,t.eW)(" 没错！我在默认的IMC中配置过相同的按键给Action! ")])),_:1}),(0,t.bF)(s,{avatar:"../../assets/emoji/dsyj.png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[(0,t.eW)(" 那就没错了，如果多个IMC配置了同个Action到相同的按键时，IMC Priority优先级高的生效,这种情况只需要 Priority降级就行了。 ")])),_:1}),u])}]]),d=JSON.parse('{"path":"/unreal/core_%E6%A0%B8%E5%BF%83_/4.3-EnhancedInput.html","title":"c4.3Subsystem|EnhancedInput优先级","lang":"zh-CN","frontmatter":{"title":"c4.3Subsystem|EnhancedInput优先级","order":403,"category":["u++"],"description":"导读 EnhancedInput|Action绑定 EnhancedInput|Action解绑 EnhancedInput|切换IMC优先级","head":[["meta",{"property":"og:url","content":"https://rendertool.github.io/RenderDoc/RenderDoc/unreal/core_%E6%A0%B8%E5%BF%83_/4.3-EnhancedInput.html"}],["meta",{"property":"og:site_name","content":"RenderDoc"}],["meta",{"property":"og:title","content":"c4.3Subsystem|EnhancedInput优先级"}],["meta",{"property":"og:description","content":"导读 EnhancedInput|Action绑定 EnhancedInput|Action解绑 EnhancedInput|切换IMC优先级"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-06T08:26:20.000Z"}],["meta",{"property":"article:author","content":"Mr.Si"}],["meta",{"property":"article:modified_time","content":"2024-08-06T08:26:20.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"c4.3Subsystem|EnhancedInput优先级\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-06T08:26:20.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Si\\",\\"url\\":\\"https://rendertool.github.io/RenderDoc/\\"}]}"]]},"headers":[{"level":3,"title":"导读","slug":"导读","link":"#导读","children":[]},{"level":2,"title":"EnhancedInput|Action绑定","slug":"enhancedinput-action绑定","link":"#enhancedinput-action绑定","children":[]},{"level":2,"title":"EnhancedInput|Action解绑","slug":"enhancedinput-action解绑","link":"#enhancedinput-action解绑","children":[]},{"level":2,"title":"EnhancedInput|切换IMC优先级","slug":"enhancedinput-切换imc优先级","link":"#enhancedinput-切换imc优先级","children":[]}],"git":{"createdTime":1722932780000,"updatedTime":1722932780000,"contributors":[{"name":"sigaohe","email":"750831855@qq.com","commits":1}]},"readingTime":{"minutes":1.37,"words":412},"filePathRelative":"unreal/core[核心]/4.3-EnhancedInput.md","localizedDate":"2024年8月6日","excerpt":"<h3>导读</h3>\\n\\n<h2>EnhancedInput|Action绑定</h2>\\n\\n<div class=\\"language-cpp\\" data-ext=\\"cpp\\" data-title=\\"cpp\\"><pre class=\\"language-cpp\\"><code>\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">const</span> APlayerController<span class=\\"token operator\\">*</span> PC <span class=\\"token operator\\">=</span> <span class=\\"token function\\">GetOwningPlayer</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\tLocalPlayer <span class=\\"token operator\\">=</span> PC<span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">GetLocalPlayer</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>LocalPlayer<span class=\\"token punctuation\\">)</span>\\n\\t\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>UEnhancedInputLocalPlayerSubsystem<span class=\\"token operator\\">*</span> Subsystem <span class=\\"token operator\\">=</span> LocalPlayer<span class=\\"token operator\\">-&gt;</span><span class=\\"token generic-function\\"><span class=\\"token function\\">GetSubsystem</span><span class=\\"token generic class-name\\"><span class=\\"token operator\\">&lt;</span>UEnhancedInputLocalPlayerSubsystem<span class=\\"token operator\\">&gt;</span></span></span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\t\\t\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t\\t\\t<span class=\\"token comment\\">// 检查是否已经添加了输入映射上下文</span>\\n\\t\\t\\t\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">!</span>Subsystem<span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">HasMappingContext</span><span class=\\"token punctuation\\">(</span>InputMappingContext<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\t\\t\\t\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t\\t\\t\\tSubsystem<span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">AddMappingContext</span><span class=\\"token punctuation\\">(</span>InputMappingContext<span class=\\"token punctuation\\">,</span> <span class=\\"token number\\">2</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\t\\n\\t\\t\\t\\t<span class=\\"token punctuation\\">}</span>\\n\\t\\t\\t<span class=\\"token punctuation\\">}</span>\\n\\t\\t<span class=\\"token punctuation\\">}</span>\\n\\t<span class=\\"token punctuation\\">}</span>\\n\\n\\t<span class=\\"token comment\\">// 绑定聊天切换动作</span>\\n\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>UEnhancedInputComponent<span class=\\"token operator\\">*</span> EnhancedInputComponent <span class=\\"token operator\\">=</span> <span class=\\"token generic-function\\"><span class=\\"token function\\">Cast</span><span class=\\"token generic class-name\\"><span class=\\"token operator\\">&lt;</span>UEnhancedInputComponent<span class=\\"token operator\\">&gt;</span></span></span><span class=\\"token punctuation\\">(</span><span class=\\"token function\\">GetOwningPlayer</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">-&gt;</span>InputComponent<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>InputAction_ChatToggle<span class=\\"token punctuation\\">)</span>\\n\\t\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t\\tEnhancedInputComponent<span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">BindAction</span><span class=\\"token punctuation\\">(</span>InputAction_ChatToggle<span class=\\"token punctuation\\">,</span> ETriggerEvent<span class=\\"token double-colon punctuation\\">::</span>Triggered<span class=\\"token punctuation\\">,</span> <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">,</span> <span class=\\"token operator\\">&amp;</span>UChatWidgetBase<span class=\\"token double-colon punctuation\\">::</span>HandleChatAction<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\t<span class=\\"token punctuation\\">}</span>\\n\\t<span class=\\"token punctuation\\">}</span>\\n</code></pre></div>","autoDesc":true}')}}]);