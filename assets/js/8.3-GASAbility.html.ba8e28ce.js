"use strict";(self.webpackChunkrenderdoc=self.webpackChunkrenderdoc||[]).push([[4031],{96181:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>b,data:()=>v});var t=a(20641);const e=a.p+"assets/img/GA_008.00b382b6.png",o=a.p+"assets/img/GA_009.997dcf8c.png",c=(0,t.Lk)("h3",{id:"_1-abilitytask-waitgameplayevent",tabindex:"-1"},[(0,t.Lk)("a",{class:"header-anchor",href:"#_1-abilitytask-waitgameplayevent"},[(0,t.Lk)("span",null,"1.AbilityTask_WaitGameplayEvent")])],-1),p=(0,t.Lk)("figure",null,[(0,t.Lk)("img",{src:e,alt:"",tabindex:"0",loading:"lazy"}),(0,t.Lk)("figcaption")],-1),l=(0,t.Lk)("h3",{id:"_2-sendgameplayeventtoactor",tabindex:"-1"},[(0,t.Lk)("a",{class:"header-anchor",href:"#_2-sendgameplayeventtoactor"},[(0,t.Lk)("span",null,"2.SendGameplayEventToActor")])],-1),k=(0,t.Fv)('<h3 id="方向计算" tabindex="-1"><a class="header-anchor" href="#方向计算"><span>方向计算</span></a></h3><div class="language-cpp line-numbers-mode" data-ext="cpp" data-title="cpp"><pre class="language-cpp"><code>EDirectionType <span class="token class-name">UAbilityUtility</span><span class="token double-colon punctuation">::</span><span class="token function">DeterminePlayerInputDirection</span><span class="token punctuation">(</span><span class="token keyword">const</span> APawn<span class="token operator">*</span> Pawn<span class="token punctuation">)</span>\n<span class="token punctuation">{</span>\n\t<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>Pawn <span class="token operator">||</span><span class="token operator">!</span>Pawn<span class="token operator">-&gt;</span>InputComponent<span class="token punctuation">)</span> <span class="token keyword">return</span> EDirectionType<span class="token double-colon punctuation">::</span>Invalid<span class="token punctuation">;</span>\n\t\n\t<span class="token comment">// 计算相对方向向量</span>\n\t<span class="token keyword">const</span> FVector InputDirection <span class="token operator">=</span> Pawn<span class="token operator">-&gt;</span><span class="token function">GetLastMovementInputVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetSafeNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t\n\t<span class="token keyword">if</span> <span class="token punctuation">(</span>InputDirection<span class="token punctuation">.</span><span class="token function">IsNearlyZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">{</span>\n\t\t<span class="token keyword">return</span> EDirectionType<span class="token double-colon punctuation">::</span>Forward<span class="token punctuation">;</span> <span class="token comment">// 默认向前</span>\n\t<span class="token punctuation">}</span>\n\t<span class="token keyword">float</span> ForwardDot <span class="token operator">=</span> <span class="token class-name">FVector</span><span class="token double-colon punctuation">::</span><span class="token function">DotProduct</span><span class="token punctuation">(</span>InputDirection<span class="token punctuation">,</span> Pawn<span class="token operator">-&gt;</span><span class="token function">GetActorForwardVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\t<span class="token keyword">float</span> RightDot <span class="token operator">=</span> <span class="token class-name">FVector</span><span class="token double-colon punctuation">::</span><span class="token function">DotProduct</span><span class="token punctuation">(</span>InputDirection<span class="token punctuation">,</span> Pawn<span class="token operator">-&gt;</span><span class="token function">GetActorRightVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n\t<span class="token keyword">if</span> <span class="token punctuation">(</span>ForwardDot <span class="token operator">&gt;</span> <span class="token number">0.5f</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">{</span>\n\t\t<span class="token keyword">return</span> EDirectionType<span class="token double-colon punctuation">::</span>Forward<span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span>\n\t<span class="token keyword">if</span> <span class="token punctuation">(</span>ForwardDot <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">{</span>\n\t\t<span class="token keyword">return</span> EDirectionType<span class="token double-colon punctuation">::</span>Backward<span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span>\n\t<span class="token keyword">if</span> <span class="token punctuation">(</span>RightDot <span class="token operator">&gt;</span> <span class="token number">0.5f</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">{</span>\n\t\t<span class="token keyword">return</span> EDirectionType<span class="token double-colon punctuation">::</span>Right<span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span>\n\t<span class="token keyword">if</span> <span class="token punctuation">(</span>RightDot <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation">)</span>\n\t<span class="token punctuation">{</span>\n\t\t<span class="token keyword">return</span> EDirectionType<span class="token double-colon punctuation">::</span>Left<span class="token punctuation">;</span>\n\t<span class="token punctuation">}</span>\n\t<span class="token keyword">return</span> EDirectionType<span class="token double-colon punctuation">::</span>Forward<span class="token punctuation">;</span> \n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="'+o+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',3),i={class:"hint-container note"},u=(0,t.Lk)("p",{class:"hint-container-title"},"注",-1),r=(0,t.Lk)("h3",{id:"abilitytasks",tabindex:"-1"},[(0,t.Lk)("a",{class:"header-anchor",href:"#abilitytasks"},[(0,t.Lk)("span",null,"AbilityTasks")])],-1),L=(0,t.Lk)("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp","data-title":"cpp"},[(0,t.Lk)("pre",{class:"language-cpp"},[(0,t.Lk)("code",null,[(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"include"),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"AbilitySystem/AbilityTasks/AbilityTask_CalculateInputDirection.h"')]),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"include"),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"AbilitySystemComponent.h"')]),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"include"),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"AbilitySystem/AbilityLib/EDirectionType.h"')]),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"include"),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"AbilitySystem/AbilityLib/AbilityUtility.h"')]),(0,t.eW)("\n\nUAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"UAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.Lk)("span",{class:"token function"},"CreateCalculateInputDirectionTask"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("UGameplayAbility"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(" OwningAbility"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n    UAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(" MyTask "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token generic-function"},[(0,t.Lk)("span",{class:"token function"},"NewAbilityTask"),(0,t.Lk)("span",{class:"token generic class-name"},[(0,t.Lk)("span",{class:"token operator"},"<"),(0,t.eW)("UAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token operator"},">")])]),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("OwningAbility"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token keyword"},"return"),(0,t.eW)(" MyTask"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n\n"),(0,t.Lk)("span",{class:"token keyword"},"void"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"UAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.Lk)("span",{class:"token function"},"Activate"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token class-name"},"Super"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.Lk)("span",{class:"token function"},"Activate"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"bool"),(0,t.eW)(" bIsLocallyControlled "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(" Ability"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.Lk)("span",{class:"token function"},"GetCurrentActorInfo"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.Lk)("span",{class:"token function"},"IsLocallyControlled"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    \n    "),(0,t.Lk)("span",{class:"token comment"},"// 如果是本地控制，则发送预测请求"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token keyword"},"if"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("bIsLocallyControlled"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token function"},"SendActionDirectionToServer"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token keyword"},"else"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(" FGameplayAbilitySpecHandle SpecHandle "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"GetAbilitySpecHandle"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(" FPredictionKey ActivationPredictionKey "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"GetActivationPredictionKey"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n        AbilitySystemComponent"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"Get"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.Lk)("span",{class:"token function"},"AbilityTargetDataSetDelegate"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("SpecHandle"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" ActivationPredictionKey"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"AddUObject"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token keyword"},"this"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(),(0,t.Lk)("span",{class:"token operator"},"&"),(0,t.eW)("UAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.eW)("OnActionDirectionReplicated"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"bool"),(0,t.eW)(" bCalledDelegate "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(" AbilitySystemComponent"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"Get"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.Lk)("span",{class:"token function"},"CallReplicatedTargetDataDelegatesIfSet"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("SpecHandle"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" ActivationPredictionKey"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token keyword"},"if"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token operator"},"!"),(0,t.eW)("bCalledDelegate"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n            "),(0,t.Lk)("span",{class:"token function"},"SetWaitingOnRemotePlayerData"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n\n"),(0,t.Lk)("span",{class:"token keyword"},"void"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"UAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.Lk)("span",{class:"token function"},"SendActionDirectionToServer"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token comment"},"// 使用预测窗口来封装客户端到服务器的预测机制"),(0,t.eW)("\n    FScopedPredictionWindow "),(0,t.Lk)("span",{class:"token function"},"ScopedPrediction"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("AbilitySystemComponent"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"Get"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\n    "),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(" APawn"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(" Character "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token generic-function"},[(0,t.Lk)("span",{class:"token function"},"Cast"),(0,t.Lk)("span",{class:"token generic class-name"},[(0,t.Lk)("span",{class:"token operator"},"<"),(0,t.eW)("APawn"),(0,t.Lk)("span",{class:"token operator"},">")])]),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("Ability"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.Lk)("span",{class:"token function"},"GetCurrentActorInfo"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.eW)("AvatarActor"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"Get"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token keyword"},"if"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token operator"},"!"),(0,t.eW)("Character"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token function"},"EndTask"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)(),(0,t.Lk)("span",{class:"token comment"},"// 如果角色无效，结束任务"),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token keyword"},"return"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n    \n    "),(0,t.Lk)("span",{class:"token comment"},"// 根据输入方向判断动作类型"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(" EDirectionType ActionDirection "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"UAbilityUtility"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.Lk)("span",{class:"token function"},"DeterminePlayerInputDirection"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("Character"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\t\n    "),(0,t.Lk)("span",{class:"token comment"},"// 封装方向枚举到一个简单的数据结构中进行传输"),(0,t.eW)("\n    FGameplayAbilityTargetDataHandle DataHandle"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    FGameplayAbilityTargetData_SimpleEnum"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(" Data "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"new"),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"FGameplayAbilityTargetData_SimpleEnum"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    Data"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.eW)("EnumValue "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(" ActionDirection"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    DataHandle"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"Add"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("Data"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\n    "),(0,t.Lk)("span",{class:"token comment"},"// 发送数据到服务器"),(0,t.eW)("\n    AbilitySystemComponent"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.Lk)("span",{class:"token function"},"ServerSetReplicatedTargetData"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token function"},"GetAbilitySpecHandle"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token function"},"GetActivationPredictionKey"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)("\n        DataHandle"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)("\n        "),(0,t.Lk)("span",{class:"token function"},"FGameplayTag"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)("\n        AbilitySystemComponent"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.eW)("ScopedPredictionKey"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    \n    "),(0,t.Lk)("span",{class:"token keyword"},"if"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token function"},"ShouldBroadcastAbilityTaskDelegates"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n        ValidDirection"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"Broadcast"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("ActionDirection"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n\n\n"),(0,t.Lk)("span",{class:"token keyword"},"void"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"UAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.Lk)("span",{class:"token function"},"OnActionDirectionReplicated"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(" FGameplayAbilityTargetDataHandle"),(0,t.Lk)("span",{class:"token operator"},"&"),(0,t.eW)(" DataHandle"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" FGameplayTag ActivationTag"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n    "),(0,t.Lk)("span",{class:"token comment"},"// 提取枚举类型的方向"),(0,t.eW)("\n  AbilitySystemComponent"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.Lk)("span",{class:"token function"},"ConsumeClientReplicatedTargetData"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token function"},"GetAbilitySpecHandle"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"GetActivationPredictionKey"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n  \t"),(0,t.Lk)("span",{class:"token keyword"},"if"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token function"},"ShouldBroadcastAbilityTaskDelegates"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n  \t"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n  \t    "),(0,t.Lk)("span",{class:"token keyword"},"for"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token keyword"},"auto"),(0,t.eW)(" Data "),(0,t.Lk)("span",{class:"token operator"},":"),(0,t.eW)(" DataHandle"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.eW)("Data"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n  \t    "),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n  \t        "),(0,t.Lk)("span",{class:"token keyword"},"if"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("Data"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n  \t        "),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n  \t        \tGEngine"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.Lk)("span",{class:"token function"},"AddOnScreenDebugMessage"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token operator"},"-"),(0,t.Lk)("span",{class:"token number"},"1"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(),(0,t.Lk)("span",{class:"token number"},"5.0f"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" FColor"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.eW)("Red"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"TEXT"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token string"},'"OnActionDirectionReplicated"'),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n  \t        \tFGameplayAbilityTargetData_SimpleEnum"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(" HitResultPtr "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token generic-function"},[(0,t.Lk)("span",{class:"token function"},"static_cast"),(0,t.eW)(),(0,t.Lk)("span",{class:"token generic class-name"},[(0,t.Lk)("span",{class:"token operator"},"<"),(0,t.eW)("FGameplayAbilityTargetData_SimpleEnum"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.Lk)("span",{class:"token operator"},">")])]),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("Data"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"Get"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n  \t            "),(0,t.Lk)("span",{class:"token keyword"},"if"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("HitResultPtr"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n  \t            "),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n  \t            \tValidDirection"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"Broadcast"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("HitResultPtr"),(0,t.Lk)("span",{class:"token operator"},"->"),(0,t.eW)("EnumValue"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n  \t            "),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n  \t        "),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n  \t    "),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n  \t"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n")])]),(0,t.Lk)("div",{class:"line-numbers","aria-hidden":"true"},[(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"})])],-1),d=(0,t.Lk)("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp","data-title":"cpp"},[(0,t.Lk)("pre",{class:"language-cpp"},[(0,t.Lk)("code",null,[(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"pragma"),(0,t.eW)(),(0,t.Lk)("span",{class:"token expression"},"once")]),(0,t.eW)("\n\n"),(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"include"),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"CoreMinimal.h"')]),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"include"),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"Abilities/Tasks/AbilityTask.h"')]),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"include"),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"AbilitySystem/AbilityLib/AbilityUtility.h"')]),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token macro property"},[(0,t.Lk)("span",{class:"token directive-hash"},"#"),(0,t.Lk)("span",{class:"token directive keyword"},"include"),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"AbilityTask_CalculateInputDirection.generated.h"')]),(0,t.eW)("\n\n"),(0,t.Lk)("span",{class:"token comment"},"// 自定义结构用于传递简单的枚举值"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token function"},"USTRUCT"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("BlueprintType"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token keyword"},"struct"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"FGameplayAbilityTargetData_SimpleEnum"),(0,t.eW)(),(0,t.Lk)("span",{class:"token operator"},":"),(0,t.eW)(),(0,t.Lk)("span",{class:"token base-clause"},[(0,t.Lk)("span",{class:"token keyword"},"public"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"FGameplayAbilityTargetData")]),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token function"},"GENERATED_USTRUCT_BODY"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n\n\t"),(0,t.Lk)("span",{class:"token comment"},"// 用于存储简单的枚举值 (例如方向类型)"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token function"},"UPROPERTY"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("BlueprintReadWrite"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" EditAnywhere"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" Category "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(" Targeting"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n\tEDirectionType EnumValue"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n    \n\t"),(0,t.Lk)("span",{class:"token keyword"},"virtual"),(0,t.eW)(" UScriptStruct"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"GetScriptStruct"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"override"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"return"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"FGameplayAbilityTargetData_SimpleEnum"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.Lk)("span",{class:"token function"},"StaticStruct"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n\n\t"),(0,t.Lk)("span",{class:"token keyword"},"virtual"),(0,t.eW)(" FString "),(0,t.Lk)("span",{class:"token function"},"ToString"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"override"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"return"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"FString"),(0,t.Lk)("span",{class:"token double-colon punctuation"},"::"),(0,t.Lk)("span",{class:"token function"},"Printf"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token function"},"TEXT"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token string"},'"EnumValue: %d"'),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(),(0,t.Lk)("span",{class:"token generic-function"},[(0,t.Lk)("span",{class:"token function"},"static_cast"),(0,t.Lk)("span",{class:"token generic class-name"},[(0,t.Lk)("span",{class:"token operator"},"<"),(0,t.eW)("uint8"),(0,t.Lk)("span",{class:"token operator"},">")])]),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("EnumValue"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n\n\t"),(0,t.Lk)("span",{class:"token keyword"},"bool"),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"NetSerialize"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("FArchive"),(0,t.Lk)("span",{class:"token operator"},"&"),(0,t.eW)(" Ar"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" UPackageMap"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(" Map"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"bool"),(0,t.Lk)("span",{class:"token operator"},"&"),(0,t.eW)(" bOutSuccess"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n\t\t"),(0,t.Lk)("span",{class:"token comment"},"//Ar << EnumValue; // 序列化 EnumValue"),(0,t.eW)("\n\t\tAr"),(0,t.Lk)("span",{class:"token punctuation"},"."),(0,t.Lk)("span",{class:"token function"},"SerializeBits"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token operator"},"&"),(0,t.eW)("EnumValue"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(),(0,t.Lk)("span",{class:"token number"},"3"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\t\tbOutSuccess "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token boolean"},"true"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\t\t"),(0,t.Lk)("span",{class:"token keyword"},"return"),(0,t.eW)(),(0,t.Lk)("span",{class:"token boolean"},"true"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\n"),(0,t.Lk)("span",{class:"token comment"},"// 使结构可以通过网络序列化"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token keyword"},"template"),(0,t.Lk)("span",{class:"token operator"},"<"),(0,t.Lk)("span",{class:"token operator"},">"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token keyword"},"struct"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"TStructOpsTypeTraits"),(0,t.Lk)("span",{class:"token operator"},"<"),(0,t.eW)("FGameplayAbilityTargetData_SimpleEnum"),(0,t.Lk)("span",{class:"token operator"},">"),(0,t.eW)(),(0,t.Lk)("span",{class:"token operator"},":"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"public"),(0,t.eW)(" TStructOpsTypeTraitsBase2"),(0,t.Lk)("span",{class:"token operator"},"<"),(0,t.eW)("FGameplayAbilityTargetData_SimpleEnum"),(0,t.Lk)("span",{class:"token operator"},">"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token keyword"},"enum"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n\t\tWithNetSerializer "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token boolean"},"true"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\n"),(0,t.Lk)("span",{class:"token function"},"UCLASS"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token keyword"},"class"),(0,t.eW)(),(0,t.Lk)("span",{class:"token class-name"},"EXORCIST_API"),(0,t.eW)(" UAbilityTask_CalculateInputDirection "),(0,t.Lk)("span",{class:"token operator"},":"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"public"),(0,t.eW)(" UAbilityTask\n"),(0,t.Lk)("span",{class:"token punctuation"},"{"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token function"},"GENERATED_BODY"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n"),(0,t.Lk)("span",{class:"token keyword"},"public"),(0,t.Lk)("span",{class:"token operator"},":"),(0,t.eW)("\n\n\t"),(0,t.Lk)("span",{class:"token function"},"DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("FInputDirectionDelegate"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" EDirectionType"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" DirectionType"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\t\n\t"),(0,t.Lk)("span",{class:"token function"},"UFUNCTION"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("BlueprintCallable"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" Category"),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.Lk)("span",{class:"token string"},'"Ability|Tasks"'),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" meta "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("DisplayName "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"CreateGetInputDirectionTask"'),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" HidePin "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"OwningAbility"'),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" DefaultToSelf "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"OwningAbility"'),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" BlueprintInternalUseOnly "),(0,t.Lk)("span",{class:"token operator"},"="),(0,t.eW)(),(0,t.Lk)("span",{class:"token string"},'"true"'),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token keyword"},"static"),(0,t.eW)(" \tUAbilityTask_CalculateInputDirection"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"CreateCalculateInputDirectionTask"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("UGameplayAbility"),(0,t.Lk)("span",{class:"token operator"},"*"),(0,t.eW)(" OwningAbility"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\n\t"),(0,t.Lk)("span",{class:"token function"},"UPROPERTY"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.eW)("BlueprintAssignable"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n\tFInputDirectionDelegate ValidDirection"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\n"),(0,t.Lk)("span",{class:"token keyword"},"private"),(0,t.Lk)("span",{class:"token operator"},":"),(0,t.eW)("\n\n\t"),(0,t.Lk)("span",{class:"token keyword"},"virtual"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"void"),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"Activate"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)(),(0,t.Lk)("span",{class:"token keyword"},"override"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\t\n\t"),(0,t.Lk)("span",{class:"token function"},"UFUNCTION"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token keyword"},"void"),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"SendActionDirectionToServer"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\t\n\t"),(0,t.Lk)("span",{class:"token function"},"UFUNCTION"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.eW)("\n\t"),(0,t.Lk)("span",{class:"token keyword"},"void"),(0,t.eW)(),(0,t.Lk)("span",{class:"token function"},"OnActionDirectionReplicated"),(0,t.Lk)("span",{class:"token punctuation"},"("),(0,t.Lk)("span",{class:"token keyword"},"const"),(0,t.eW)(" FGameplayAbilityTargetDataHandle"),(0,t.Lk)("span",{class:"token operator"},"&"),(0,t.eW)(" DataHandle"),(0,t.Lk)("span",{class:"token punctuation"},","),(0,t.eW)(" FGameplayTag ActivationTag"),(0,t.Lk)("span",{class:"token punctuation"},")"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n\t\n"),(0,t.Lk)("span",{class:"token punctuation"},"}"),(0,t.Lk)("span",{class:"token punctuation"},";"),(0,t.eW)("\n")])]),(0,t.Lk)("div",{class:"line-numbers","aria-hidden":"true"},[(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"}),(0,t.Lk)("div",{class:"line-number"})])],-1),m={},b=(0,a(66262).A)(m,[["render",function(n,s){const a=(0,t.g2)("chatmessage"),e=(0,t.g2)("RouteLink"),o=(0,t.g2)("CodeTabs");return(0,t.uX)(),(0,t.CE)("div",null,[c,(0,t.bF)(a,{avatar:"../../assets/emoji/bqb (2).png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[(0,t.eW)(" GA不仅仅可以通过ASC->TryActivateAbility执行，还可以通过事件触发， ")])),_:1}),p,l,(0,t.bF)(a,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:(0,t.k6)((()=>[(0,t.eW)(" 也就是说我可以通过这个SendGameplayEventToActor 激活拥有Tag的事件？比如翻滚闪避动作？ 外部判断闪避方向传递闪避方向给这个GA? ")])),_:1}),(0,t.bF)(a,{avatar:"../../assets/emoji/bqb (2).png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[(0,t.eW)(" 是的，只不过你说的这种其实完全可以在GA中实现，通过事件传递更适合类似受击技能，通过Hit等伤害事件触发传递的。 ")])),_:1}),(0,t.bF)(a,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:(0,t.k6)((()=>[(0,t.eW)(" 为什么？ ")])),_:1}),(0,t.bF)(a,{avatar:"../../assets/emoji/bqb (2).png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[(0,t.eW)(" 受击本身就是通过伤害碰撞事件传递的，事件本身是服务器行为，所以受击行为很好做，只需要通过伤害事件配合方向计算就行了。 但闪避则不同，闪避的基本思路是根据是客户端的前一帧输入方向，通过服务器授权播放对应的方向。（本地会预测播放） ")])),_:1}),k,(0,t.Lk)("div",i,[u,(0,t.Lk)("p",null,[(0,t.eW)("扩展- GetLastInputVector 和 GetLastMovementInputVector区别"),(0,t.bF)(e,{to:"/unreal/exp_%E7%BB%8F%E9%AA%8C_/10-inputvector.html"},{default:(0,t.k6)((()=>[(0,t.eW)("传送门")])),_:1})])]),(0,t.bF)(a,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:(0,t.k6)((()=>[(0,t.eW)(" 也就是说，闪避需要RPC提交给服务器执行？本地客户端可以拿到对应的Input方向，但对应在服务器上的角色 好像并不会监听客户端的输入方向。 ")])),_:1}),(0,t.bF)(a,{avatar:"../../assets/emoji/bqb (2).png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[(0,t.eW)(" RPC肯定是要的，咱完全可以封装封装在GA中，利用GAS的框架函数来实现。 ")])),_:1}),(0,t.bF)(a,{avatar:"../../assets/emoji/hx.png",avatarWidth:40},{default:(0,t.k6)((()=>[(0,t.eW)(" 可是GA中执行GetLastInputVector服务器端一样拿不到结果啊！GA本身并不是Actor，也没法发起RPC吧？ ")])),_:1}),(0,t.bF)(a,{avatar:"../../assets/emoji/bqb (2).png",avatarWidth:40,alignLeft:""},{default:(0,t.k6)((()=>[(0,t.eW)(" GA本身确实不可以，但你别忘记GA是由ASC组件维护的，自然可以通过ASC来同步一些变量。并且这种任务多半是异步任务，我们可以封装在AbilityTasks中, 例如：我想同步一个方向枚举给服务器，以便能够正确的播放对应的动画。 ")])),_:1}),r,(0,t.bF)(o,{id:"33",data:[{id:"UAbilityTask_CalculateInputDirection.cpp"},{id:"AbilityTask_CalculateInputDirection.h"}],"tab-id":"language"},{title0:(0,t.k6)((({value:n,isActive:s})=>[(0,t.eW)("UAbilityTask_CalculateInputDirection.cpp")])),title1:(0,t.k6)((({value:n,isActive:s})=>[(0,t.eW)("AbilityTask_CalculateInputDirection.h")])),tab0:(0,t.k6)((({value:n,isActive:s})=>[L])),tab1:(0,t.k6)((({value:n,isActive:s})=>[d])),_:1},8,["data"])])}]]),v=JSON.parse('{"path":"/unreal/core_%E6%A0%B8%E5%BF%83_/8.3-GASAbility.html","title":"c8.3GAS|GameplayAbility|实践闪避|翻滚","lang":"zh-CN","frontmatter":{"title":"c8.3GAS|GameplayAbility|实践闪避|翻滚","order":803,"category":["u++"],"description":"1.AbilityTask_WaitGameplayEvent 2.SendGameplayEventToActor 方向计算 注 扩展- GetLastInputVector 和 GetLastMovementInputVector区别 AbilityTasks","head":[["meta",{"property":"og:url","content":"https://rendertool.github.io/RenderDoc/unreal/core_%E6%A0%B8%E5%BF%83_/8.3-GASAbility.html"}],["meta",{"property":"og:site_name","content":"RenderDoc"}],["meta",{"property":"og:title","content":"c8.3GAS|GameplayAbility|实践闪避|翻滚"}],["meta",{"property":"og:description","content":"1.AbilityTask_WaitGameplayEvent 2.SendGameplayEventToActor 方向计算 注 扩展- GetLastInputVector 和 GetLastMovementInputVector区别 AbilityTasks"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-10T02:47:19.000Z"}],["meta",{"property":"article:author","content":"Mr.Si"}],["meta",{"property":"article:modified_time","content":"2025-05-10T02:47:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"c8.3GAS|GameplayAbility|实践闪避|翻滚\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-10T02:47:19.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Si\\",\\"url\\":\\"https://rendertool.github.io/RenderDoc/\\"}]}"]]},"headers":[{"level":3,"title":"1.AbilityTask_WaitGameplayEvent","slug":"_1-abilitytask-waitgameplayevent","link":"#_1-abilitytask-waitgameplayevent","children":[]},{"level":3,"title":"2.SendGameplayEventToActor","slug":"_2-sendgameplayeventtoactor","link":"#_2-sendgameplayeventtoactor","children":[]},{"level":3,"title":"方向计算","slug":"方向计算","link":"#方向计算","children":[]},{"level":3,"title":"AbilityTasks","slug":"abilitytasks","link":"#abilitytasks","children":[]}],"git":{"createdTime":1746418547000,"updatedTime":1746845239000,"contributors":[{"name":"sigaohe","email":"750831855@qq.com","commits":2}]},"readingTime":{"minutes":3.51,"words":1053},"filePathRelative":"unreal/core[核心]/8.3-GASAbility.md","localizedDate":"2025年5月5日","excerpt":"<h3>1.AbilityTask_WaitGameplayEvent</h3>\\n\\n<figure><figcaption></figcaption></figure>\\n<h3>2.SendGameplayEventToActor</h3>\\n\\n\\n\\n\\n<h3>方向计算</h3>\\n<div class=\\"language-cpp\\" data-ext=\\"cpp\\" data-title=\\"cpp\\"><pre class=\\"language-cpp\\"><code>EDirectionType <span class=\\"token class-name\\">UAbilityUtility</span><span class=\\"token double-colon punctuation\\">::</span><span class=\\"token function\\">DeterminePlayerInputDirection</span><span class=\\"token punctuation\\">(</span><span class=\\"token keyword\\">const</span> APawn<span class=\\"token operator\\">*</span> Pawn<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token punctuation\\">{</span>\\n\\t<span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">!</span>Pawn <span class=\\"token operator\\">||</span><span class=\\"token operator\\">!</span>Pawn<span class=\\"token operator\\">-&gt;</span>InputComponent<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">return</span> EDirectionType<span class=\\"token double-colon punctuation\\">::</span>Invalid<span class=\\"token punctuation\\">;</span>\\n\\t\\n\\t<span class=\\"token comment\\">// 计算相对方向向量</span>\\n\\t<span class=\\"token keyword\\">const</span> FVector InputDirection <span class=\\"token operator\\">=</span> Pawn<span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">GetLastMovementInputVector</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">GetSafeNormal</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\n\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>InputDirection<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">IsNearlyZero</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t<span class=\\"token keyword\\">return</span> EDirectionType<span class=\\"token double-colon punctuation\\">::</span>Forward<span class=\\"token punctuation\\">;</span> <span class=\\"token comment\\">// 默认向前</span>\\n\\t<span class=\\"token punctuation\\">}</span>\\n\\t<span class=\\"token keyword\\">float</span> ForwardDot <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">FVector</span><span class=\\"token double-colon punctuation\\">::</span><span class=\\"token function\\">DotProduct</span><span class=\\"token punctuation\\">(</span>InputDirection<span class=\\"token punctuation\\">,</span> Pawn<span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">GetActorForwardVector</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token keyword\\">float</span> RightDot <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">FVector</span><span class=\\"token double-colon punctuation\\">::</span><span class=\\"token function\\">DotProduct</span><span class=\\"token punctuation\\">(</span>InputDirection<span class=\\"token punctuation\\">,</span> Pawn<span class=\\"token operator\\">-&gt;</span><span class=\\"token function\\">GetActorRightVector</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>ForwardDot <span class=\\"token operator\\">&gt;</span> <span class=\\"token number\\">0.5f</span><span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t<span class=\\"token keyword\\">return</span> EDirectionType<span class=\\"token double-colon punctuation\\">::</span>Forward<span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token punctuation\\">}</span>\\n\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>ForwardDot <span class=\\"token operator\\">&lt;</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">0.5f</span><span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t<span class=\\"token keyword\\">return</span> EDirectionType<span class=\\"token double-colon punctuation\\">::</span>Backward<span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token punctuation\\">}</span>\\n\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>RightDot <span class=\\"token operator\\">&gt;</span> <span class=\\"token number\\">0.5f</span><span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t<span class=\\"token keyword\\">return</span> EDirectionType<span class=\\"token double-colon punctuation\\">::</span>Right<span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token punctuation\\">}</span>\\n\\t<span class=\\"token keyword\\">if</span> <span class=\\"token punctuation\\">(</span>RightDot <span class=\\"token operator\\">&lt;</span> <span class=\\"token operator\\">-</span><span class=\\"token number\\">0.5f</span><span class=\\"token punctuation\\">)</span>\\n\\t<span class=\\"token punctuation\\">{</span>\\n\\t\\t<span class=\\"token keyword\\">return</span> EDirectionType<span class=\\"token double-colon punctuation\\">::</span>Left<span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token punctuation\\">}</span>\\n\\t<span class=\\"token keyword\\">return</span> EDirectionType<span class=\\"token double-colon punctuation\\">::</span>Forward<span class=\\"token punctuation\\">;</span> \\n<span class=\\"token punctuation\\">}</span>\\n</code></pre></div>","autoDesc":true}')}}]);